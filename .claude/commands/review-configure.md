# Oversight Review - Configure

You help the user view or initialize their project's oversight configuration.

## Arguments

`$ARGUMENTS` controls the action:

- **If `$ARGUMENTS` is empty or "show"**: Display the current configuration
- **If `$ARGUMENTS` is "init"**: Generate a starter `.oversight.yml` in the project root

## Action: Show Configuration

1. Check if `.oversight.yml` exists in the project root
2. If it exists, read and display it with explanations of each setting
3. If it doesn't exist, display the default configuration and inform the user they can run `/review-configure init` to create one
4. Also display which agents are currently available: security, quality, architecture, devops, docs, planning, testing, compliance, networking, virtualization, storage, compute, accessibility, observability

### Default Configuration (when no `.oversight.yml` exists)

```yaml
# Default behavior when no .oversight.yml is present:
# - Security agent always runs
# - Other agents auto-detect based on file patterns
# - All severity levels reported
# - Diff-based review (changed files only)
```

## Action: Init

Generate an `.oversight.yml` file in the project root. First, analyze the project to make intelligent defaults:

1. Scan the project structure to detect the project type:
   - Look for language-specific files (package.json, go.mod, requirements.txt, Cargo.toml, etc.)
   - Look for IaC files (*.tf, Dockerfile, docker-compose*, kubernetes/, etc.)
   - Look for infrastructure configs (network, virtualization, storage, compute indicators)
   - Look for web frontend files (*.html, *.jsx, *.tsx, *.vue)

2. Generate a config file with detected values and helpful comments:

```yaml
# Oversight Agents Configuration
# Generated by /review-configure init
# See the oversight-agents README for full documentation.

project:
  # Detected project type. Helps agents provide more relevant findings.
  # Options: webapp, api, library, cli, infrastructure, networking,
  #          virtualization, storage, compute, mixed
  type: <detected or "mixed">

agents:
  # Agents that always run regardless of file detection
  always:
    - security

  # Agents that never run (even if files match detection patterns)
  disabled: []
  # disabled:
  #   - accessibility

  # Per-agent configuration overrides
  config:
    security:
      # Minimum severity to report: critical, high, medium, low, info
      severity-threshold: low

    quality:
      severity-threshold: low
      # max-function-length: 50
      # max-parameters: 5
      # max-nesting-depth: 3

    architecture:
      severity-threshold: low

    devops:
      severity-threshold: low

# Custom rules (applied to all agents)
# custom-rules:
#   - "All API endpoints must require authentication"
#   - "No direct database queries outside the repository layer"

# Files/paths to exclude from review
# exclude:
#   - "vendor/"
#   - "node_modules/"
#   - "*.generated.*"
#   - "*.min.js"
```

3. Write the file and confirm to the user what was generated and why

## Output

For **show**: Display the configuration in a readable format with explanations.

For **init**: Write the `.oversight.yml` file and display a summary:

```
Created .oversight.yml with the following settings:
- Project type: [detected type]
- Always-on agents: [list]
- Disabled agents: [list]
- Severity threshold: [level]

You can customize this file to adjust agent behavior.
Run /review-configure show to view the current configuration at any time.
```
